# PostgreSQL в Docker: Развертывание и Работа

Этот проект предоставляет контейнер с PostgreSQL, который включает настройку базы данных и таблиц, доступных через порт 1450. Ниже приведены шаги для развертывания, подключения и работы с базой данных.

## 1. Предварительные требования

Перед началом убедитесь, что на вашей машине установлены:

- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)

## 2. Содержание проекта

Проект состоит из следующих файлов:

- `Dockerfile` — инструкция для создания образа Docker.
- `init.sql` — SQL-скрипт для создания таблиц в базе данных.
- `docker-compose.yml` — файл для упрощённого запуска контейнера PostgreSQL.
- `README.md` — текущий файл с инструкцией.

## 3. Шаги для развертывания

### 3.1 Клонирование репозитория

Склонируйте проект на свою машину:

```bash
git clone <URL_РЕПОЗИТОРИЯ>
cd <ИМЯ_ПАПКИ>
```

### 3.2 Создание и запуск контейнера

Запустите команду для сборки и запуска контейнера:

```bash
docker-compose up --build
```

Это создаст и запустит контейнер PostgreSQL, настроенный на порт 1450.

### 3.3 Проверьте, что контейнер запущен

Для проверки запущенных контейнеров выполните команду:

```bash
docker ps
```

Вы должны увидеть контейнер с PostgreSQL в списке запущенных контейнеров:

```
CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                    NAMES
abcdef123456   postgres:14    "docker-entrypoint.s…"   10 seconds ago   Up 8 seconds    0.0.0.0:1450->5432/tcp   my_postgres
```

## 4. Подключение к базе данных

### 4.1 Параметры подключения

- **Хост**: `localhost`
- **Порт**: `1450`
- **Пользователь**: `myuser`
- **Пароль**: `mypassword`
- **База данных**: `mydatabase`

### 4.2 Подключение через `psql`

Если у вас установлен клиент `psql`, вы можете подключиться с помощью следующей команды:

```bash
psql -h localhost -p 1450 -U myuser -d mydatabase
```

После этого введите пароль: `mypassword`.

### 4.3 Подключение через GUI (PgAdmin, DBeaver)

1. Откройте ваш GUI-клиент.
2. Создайте новое подключение с параметрами:
   - Хост: `localhost`
   - Порт: `1450`
   - Пользователь: `myuser`
   - Пароль: `mypassword`
   - База данных: `mydatabase`
3. После подключения вы сможете отправлять SQL-запросы через интерфейс.

## 5. Работа с базой данных

После подключения вы можете отправлять SQL-запросы. Вот несколько примеров:

### Пример: Получение всех пользователей

```sql
SELECT * FROM Users;
```

### Пример: Добавление нового продукта

```sql
INSERT INTO Products (name, category, description, photo_url, barcode) 
VALUES ('Молоко', 'Продукты питания', 'Молоко 1 литр', 'http://example.com/milk.jpg', '1234567890123');
```

## 6. Полезные команды Docker

### Остановка контейнера

Чтобы остановить контейнер, выполните:

```bash
docker stop my_postgres
```

### Перезапуск контейнера

Для повторного запуска остановленного контейнера:

```bash
docker start my_postgres
```

### Просмотр логов контейнера

Чтобы увидеть логи контейнера:

```bash
docker logs my_postgres
```

## 7. Остановка и удаление контейнера

Для остановки и удаления всех контейнеров и связанных с ними данных:

```bash
docker-compose down
```

## 8. Заключение

Теперь у вас развернут контейнер с PostgreSQL, настроенный на порт 1450. Вы можете подключаться к базе данных, управлять данными и использовать её для своих нужд. Если возникнут вопросы или проблемы, не стесняйтесь обращаться!
